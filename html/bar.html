<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Nationality</title>
    <link href="style2.css" rel="stylesheet" >
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Tangerine">
  </head>

  <body>
    <header>
        <h1>Age Distribution Analysis</h1>
    
        <p>Explore the age distribution across different rating scores using the interactive slider below.</p>
    </header>
    <div id="box">
    <div class="center-container">
        <div id="vis"></div> <!-- Visualization container -->
        <div id="slider-container">
            <input type="range" min="0" max="100" value="50" id="myRange" step="1">
            <span id="slider-value">50</span> <!-- Default value displayed next to slider -->
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <script>
        var originalData;
        var slider = document.getElementById("myRange");
        var sliderValueDisplay = document.getElementById("slider-value");
        sliderValueDisplay.textContent = slider.value; // Set initial slider value

        slider.oninput = function() {
            sliderValueDisplay.textContent = this.value; // Update display value
            updateChart(this.value); // Update chart when slider value changes
        };

        function filterDataByRating(rating) {
            return originalData.filter(function(d) { return d.overall > parseInt(rating); });
        }

        function updateChart(value) {
            var filteredData = filterDataByRating(value);
            var vlSpec = {
                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                "data": { "values": filteredData },
                "mark": "bar",
                "encoding": {
                    "x": {"field": "age", "type": "ordinal", "bin": {"maxbins": 30}},
                    "y": {"aggregate": "count", "type": "quantitative"}
                },
                "width": 600,
                "height": 400,
                "title": {
                    "text": `Distribution of Individuals by Age Group (Overall > ${value})`,
                    "fontSize": 20,
                    "subtitle": [`Only considering overall rating > ${value}`],
                    "subtitleFontSize": 15,
                    "color": "black",
                    "subtitleColor": "gray"
                }
            };
            vegaEmbed('#vis', vlSpec, {"actions": false});
        }

        fetch('age.json')
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
        }
        return response.json();
    })
    .then(data => {
        originalData = data;
        updateChart(slider.value); // Initialize chart
    })
   

    </script>
     </script>
     </div>
     <h3><strong>Findings and Conclusions</strong></h3>
     <p>
      One would assume that overall rating drops off as age increases, which holds true for all overall ratings.
      Interestingly, increasing the overall rating slider increases the average age of the players. This suggests that
      players are able to improve with dedication and practice, and that experience as well as talent is needed to succeed.
      <br>
      It should be noted that these interpretations are based on the assumption that the rating 
      system is uniformly applied across all ages and that the population distribution across ages 
      is not influencing the results. Additional data, such as the total number of individuals in each 
      age group or the nature of what is being rated, would be necessary to draw more definitive conclusions.
      <p>
    <h1>Player Nationality Analysis</h1>
    <img src="nationality.png" alt="nationalities image" width="400" height="400">
    <h3><strong> Findings & Conclusion</strong></h3>
  <p>
    There are many factors when it comes to selecting a player to sign. 
    This bar graph showing population of professional players within the top 10 countries. 
    This visualization will help team managers pinpoint potential countries and 
    regions with high availability of players or seek elsewhere for hidden talent 
    outside of where most professional soccer players originate from.
  <p>
    
</body>
</html> 